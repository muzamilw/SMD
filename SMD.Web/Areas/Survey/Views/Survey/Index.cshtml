@{
    ViewBag.Title = "Manage Surveys";

    string sLayout = "";
    if (Request.QueryString["m"] == "1")
    {
        sLayout = "~/Views/Shared/_Layout_Franchise.cshtml";
    }
    else
    {
        sLayout = "~/Views/Shared/_Layout.cshtml";
    }

    Layout = sLayout;

    string adminClasses = "";
    string userClasses = "";
}


@if (!User.IsInRole("User"))
{
    userClasses = "displayNone";
}
else
{
    adminClasses = "displayNone";
}

<div class="row" id="Heading_div">
    <div class="col-lg-12" style="padding-left: 0px;padding-right:0px;">
        <div style="width:57px;" class="pull-left">

            <label id="headlabel" style="font-size:24px;color:#fff!important;margin-top:7px;">Poll</label>

        </div>
        <div style="width:5px;">

        </div>

        <div style="width: 1098px;" class="pull-left">
            
            <label id="headdesc" style="color:#fff;font-size:14px;margin-top:15px;">Run a 2 picture card poll to a target audience.</label>
            <img class="pull-right closecls" src="~/Content/Images/Close_Button.png" style="margin-top:15px;" onclick="GotoHome();" />
            <div class="clearfix"></div>
        </div>
        <div class="clearfix;"></div>
    </div>
</div>
<div class="row" id="surveyBinding" style="margin-top: 5px;">
    <div class="col-lg-12" data-bind="visible: !$root.isEditorVisible()">
        <div class="row">
            <div class="col-lg-12" style="padding-left:0px;padding-right:0px;">
                <!-- ko template: { name: 'filterTemplate' } -->
                <!-- /ko -->
                <div class="main-box no-header clearfix margintop13" style="padding-top:0px;">
                    <div class="main-box-body clearfix" style="padding-left:20px;padding-right:22px;">
                        <div class="tabsdescriptions" style="margin-left:0px;">
                            <p class="group-header-description"></p>
                        </div>
                        <div class="table-responsive" style="margin-right:-4px;">
                            <table class="table table-striped table-hover" id="surveyQuestionLVTable">
                                <thead>
                                    <tr>
                                        <th class="col-lg-5 th-pointer"><span class="GridHeaderFont_size">Poll Name</span></th>
                                        <th class="col-lg-2 th-pointer" style="display:none;"><span class="GridHeaderFont_size">Question</span></th>
                                        <th class="col-lg-2 th-pointer"><span class="GridHeaderFont_size">Start Date</span></th>
                                        <th class="col-lg-2 th-pointer"><span class="GridHeaderFont_size">Answered</span></th>
                                        <th class="col-lg-2 th-pointer"><span class="@userClasses">End Date</span><span class="@adminClasses GridHeaderFont_size">Delivered %</span></th>
                                        <th class="col-lg-2 th-pointer"><span class="GridHeaderFont_size">Status</span></th>
                                        <th class="col-lg-2 th-pointer"><span>&nbsp; </span></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- ko template: { name: 'SurveyQuestionTemplate' , foreach: questions } -->
                                    <!-- /ko -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div id="pagerDivForStore" class="pull-right">
                    <!-- ko with: pager -->
                    @Html.Partial("~/Areas/Common/Views/Shared/_Pager.cshtml")
                    <!-- /ko -->
                </div>
            </div>
        </div>
    </div>

    <script id="SurveyQuestionTemplate" type="text/html">


        <tr style="cursor: pointer">

            <td>
                <a href="#" class="store-user-link" data-bind="text: Question,click:$root.onEditSurvey"></a>
            </td>
            <td style="display:none;">
                <p data-bind="text:DisplayQuestion"></p>
            </td>
            <td>
                <p data-bind="dateString:StartDate"></p>
            </td>
            @*<td>
                    <p data-bind="dateString:EndDate" class="@userClasses"></p>
                </td>*@
            <td>

                <p data-bind="text:resultClicks"></p>
            </td>
            <td>
                <p data-bind="text:CreatedBy" class="@adminClasses"></p>
            </td>
            <td>
                <!-- ko if: Status() == 1-->
                <div class="text-left statusbg" style="background:#6D6EFA;    width: 149px;">
                    <span data-bind="text: StatusValue">
                    </span>
                </div>
                <!-- /ko -->
                <!-- ko if: Status() == 2-->
                <div class="text-left statusbg" style="background:#fc0;width: 149px">
                    <span data-bind="text: StatusValue">
                    </span>
                </div>
                <!-- /ko -->
                <!-- ko if:  Status() == 3-->
                <div class="text-left statusbg" style="background:#37c675;    width: 149px;">
                    <span data-bind="text: StatusValue">
                    </span>
                </div>
                <!-- /ko -->
                <!-- ko if: Status() == 4-->
                <div class="text-left statusbg" style="background:#fd008e;width: 149px">
                    <span data-bind="text: StatusValue">
                    </span>
                </div>
                <!-- /ko -->
                <!-- ko if: Status() == 5-->
                <div class="text-left statusbg" style="background:#c8e392;width: 149px">
                    <span data-bind="text: StatusValue">
                    </span>
                </div>
                <!-- /ko -->
                <!-- ko if: Status() == 6-->
                <div class="text-left statusbg" style="background:red;width: 149px">
                    <span data-bind="text: StatusValue">
                    </span>
                </div>
                <!-- /ko -->
                <!-- ko if: Status() == 7-->
                <div class="text-left statusbg" style="background:red;width: 149px">
                    <span data-bind="text: 'Remove'">
                    </span>
                </div>
                <!-- /ko -->
                <!-- ko if: Status() == 8-->
                <div class="text-left statusbg" style="background:#fc0;width: 149px">
                    <span data-bind="text: StatusValue">
                    </span>
                </div>
                <!-- /ko -->
                <!-- ko if: Status() == 9-->
                <div class="text-left statusbg" style="background:red;width: 149px">
                    <span data-bind="text: StatusValue">
                    </span>
                </div>
                <!-- /ko -->

            </td>

            <td>
                <!-- ko if: Status() == 1 ||  Status() == 4|| Status() ==  6-->
                <a class="table-link danger" style="float: right">
                    <span class="fa-stack">
                        <i class="fa fa-square fa-stack-2x"></i>
                        <i class="fa fa-trash-o fa-stack-1x fa-inverse " data-bind="click:$root.terminateSaveChanges"></i>
                    </span>
                </a>
                <!-- /ko -->
            </td>

        </tr>
    </script>
    <script id="filterTemplate" type="text/html">
        <div class="filter-body" id="filter">

            <div class="row" style="display:none;">


                <div class="col-sm-12" style="float: left; margin-bottom:20px;">
                    <div>
                        <span style="font-size:18px; color:#81d3dc;float:left;margin-top:17px;">Picture survey</span>
                        <button class="btn btn-primary btnclick FloatRight" data-bind="click:$root.addNewSurvey" style="float:right;margin-top:2px; text-align:right">
                            Create Survey Card
                        </button>
                        <div style="clear:both;"></div>
                    </div>


                    <span class="red bold rightAlign" style=" margin-right: 14px;margin-top:-11px!important;display:none;"> Watch Video <img src="/Images/youtube_play.JPG" height="25px" /> </span> <span style="font-size: 14px;margin-right:8px;" class="Theme_subheading-Clr">Run a 2 picture card survey and create a new target audience groups <br />that can be used in any of your video or display ads campaigns.</span>&nbsp; &nbsp; &nbsp;<br />
                </div>


            </div>

            <div class="row">


                <form data-bind="submit:$root.filterSurveyQuestion">
                    <div class="filter-block">
                        <div class="form-group">

                            <div class="col-xs-2">
                                <input type="text" class="form-control" placeholder="Search..." data-bind="value:$root.filterValue">
                                <i data-bind="click:$root.filterSurveyQuestion" class="fa fa-search search-icon" style=" margin-right: 8px;"></i>
                            </div>
                            <div class="col-xs-2">
                                <select class="form-control" data-bind="options: $root.qStatuses, optionsText: 'value', optionsValue: 'id',value:$root.statusFilterValue,event:{ change: $root.SurveyQuestionsByFilter}"></select>
                            </div>

                            <div class="col-xs-8" style="padding:0px;text-align:right;">
                                @*<button class="btn  btn-info SurvyButtons" id="saveBtn" data-bind="click:$root.filterProfileQuestion" style="display:none!important;">Search</button>
                                    <button class="btn btn-default SurvyButtons" id="saveBtn" data-bind="click:$root.clearFilters" style="display:none!important;">Reset</button>*@
                                <img class="polls_image" src="/Content/Images/Surveys_icon.png">
                                <button class="btn btn-primary btnclick FloatRight" data-bind="click:$root.addNewSurvey" style="float:right;margin-top:2px; text-align:right">
                                    Create Poll
                                </button>
                            </div>

                        </div>
                    </div>
                </form>

                <div class="clearfix">

                </div>
            </div>

        </div>

    </script>
    @{
        Html.RenderPartial("~/Areas/Survey/Views/Shared/_AddEditSurvey.cshtml");
    }
</div>
<script>
    
    $("#polls_heading").css("cssText", "color:#fff!important;");

</script>
<!-- ko stopBinding: true -->
@Html.Partial("~/Areas/Common/Views/Shared/_StripeChargeCustomerDialog.cshtml")
<!-- /ko -->
<!-- ko stopBinding: true -->
@Html.Partial("~/Areas/Common/Views/Shared/_ConfirmationDialog.cshtml")
<!-- /ko -->
@section Scripts{
    <script src="~/Scripts/jquery.tokenize.js"></script>
    <script type="text/javascript">
        //$("#MainSpan").css("display", "none");
        require(["survey/survey.view", "common/confirmation.view", "common/stripeChargeCustomer.view"]);
        $("#btnSurvey").css("background-color", "#34b9c7");
        $("#btnManageApprov").css("background-color", "#34b9c7");
        $("#main_btnPannels").css("display", "none");
        $("#MarketobjDiv").css("display", "none");
        $(".hideInCoupons").css("display", "none");
        $("#topArea").css("display", "none");
        $("#divApprove").css("display", "none");
    </script>


}