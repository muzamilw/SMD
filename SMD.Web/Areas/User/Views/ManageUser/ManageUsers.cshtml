@{
    ViewBag.Title = "Manage Users";
    Layout = "~/Views/Shared/_Layout.cshtml";
    string adminClasses = "";
    string userClasses = "";
}

<div class="row" id="manageUserBinding">
    <div class="col-lg-12">
        <div class="row" id="Heading_div">
            <label style="font-size:24px;color:#fff!important;margin-top:7px;margin-bottom:10px;">Manage Users</label>
            <div style="float:right;margin-top:7px; margin-right:17px;">
                <img src="/Content/Images/Close_Button.png" data-bind="click:$root.onCloseClick" style="width:20px;height:20px;float:right;cursor:pointer;">
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12" style="padding-left:0px;padding-right:19px;">

                <div class="filter-body" id="filter" style="padding:20px;">
                    <div class="row">

                        <div class="col-sm-12" style="float: left; ">
                            <div style="border-bottom: 1px solid rgb(220,220,220);width: 100%;margin-left: 0px;margin-bottom:10px;" class="adsubHeading Theme_standard_clr">
                                Invite collegues to manage your marketing campaigns.
                                <div class="bs-example-tooltips tooltip-float-width tooltip" style=" margin-top: -5px; ">
                                    <a class="input-group-addon" tabindex="-1" href="#" data-toggle="tooltip" title="Hooray!" data-trigger="focus" style="text-decoration: none; border: 0; cursor: pointer;    padding: 0px;padding-top: 5px;"
                                       data-container="body" data-placement="right" data-content="Add a city">
                                        <span class="label label-circle-question">&nbsp;&nbsp;?&nbsp;&nbsp;</span>
                                    </a>
                                    <i class="fa fa-chevron-up" aria-hidden="true" style="color:#68b359;"></i>
                                    <span class="tooltiptext">Tooltip text</span>
                                </div>
                            </div>
                            @*<br />
                                <span style="font-size: 24px;"> Invite collegues to manage your marketing campaigns</span><br />
                                <span style="font-size: 14px;"></span>  &nbsp; &nbsp; &nbsp; <span class="red bold rightAlign"> Watch Video <img src="/Images/youtube_play.JPG" height="25px" /> </span>   </span><br />*@
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-sm-3" style="float:left;">
                            <div class="clearfix"></div>
                        </div>
                        <div class="col-sm-3" style="float:left;">
                        </div>
                        <div class="col-sm-3" style="float:right;margin-top:2px; text-align:right">
                            <button class="btn btn-primary" id="saveBtn" data-bind="click: $root.InviteUser">Invite User</button>
                        </div>
                        <div class="clearfix">
                        </div>
                    </div>
                </div>

                <div class="main-box no-header clearfix" style="padding-top:0px;">
                    <div class="main-box-body clearfix" style="padding-left:20px;padding-right:22px;">
                        <div class="tabsdescriptions" style="margin-left:0px;">
                            <p class="group-header-description"></p>
                        </div>
                        <div class="table-responsive" style="margin-right:-4px;">
                            <table class="table table-striped table-hover" id="surveyQuestionLVTable">
                                <thead>
                                    <tr>
                                        <th class="col-sm-2 th-pointer"><span>Email</span></th>
                                        <th class="col-sm-2 th-pointer"><span>Name</span></th>
                                        <th class="col-sm-2 th-pointer"><span>Role</span></th>
                                        <th class="col-sm-2 th-pointer"><span>Status</span></th>
                                        <th class="col-sm-2 th-pointer"><span>Added On</span></th>
                                        <th class="col-sm-2 th-pointer"><span>&nbsp; </span></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- ko template: { name: 'ManageUserTemplate' , foreach: userList() } -->
                                    <!-- /ko -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div id="pagerDivForStore" class="pull-right">
                </div>
            </div>
            <div class="col-lg-3">
            </div>
        </div>



    </div>
    @Html.Partial("~/Areas/User/Views/Shared/_InviteUser.cshtml")
    @Html.Partial("~/Areas/User/Views/Shared/_EditManagedUser.cshtml")
    <script id="ManageUserTemplate" type="text/html">

        <tr style="cursor: pointer">
            <td>
                <a href="#" class="store-user-link" data-bind="text: email,click:$root.onEditManagedUser"></a>
            </td>
            <td>
                <p href="#" class="store-user-link" data-bind="text: FullName"></p>
            </td>
            <td>
                <p style="margin-top:8px;" data-bind="text:RoleName"></p>
            </td>
            <td>
                <p style="margin-top:8px;" data-bind="text:Status"></p>
            </td>
            <td>
                <p style="margin-top:8px;" data-bind="dateString: CreatedOn, datePattern: 'DD/MM/YYYY'"></p>
            </td>
            <td>

                <a class="table-link danger" style="float: right" title="Remove User">
                    <span class="fa-stack">
                        <i class="fa fa-square fa-stack-2x"></i>
                        <i class="fa fa-pencil fa-stack-1x fa-inverse" data-bind="click:$root.onRemoveUser"></i>
                    </span>
                </a>
            </td>
        </tr>
    </script>
</div>
@Html.Partial("~/Areas/Common/Views/Shared/_ConfirmationDialog.cshtml")
<!-- /ko -->
@section Scripts{
    <script src="~/Scripts/jquery.tokenize.js"></script>
    <script type="text/javascript">
        require(["user/user.view", "common/confirmation.view"]);
        $("#MarketobjDiv").css("display", "none");
        $("#topArea").css("display", "none");
        $("#panelArea").css("display", "none");
    </script>
    <script>
        function getParameter(url, param) {
            if (url.indexOf('?') == -1)
                return 1;
            url = url.split('?');
            var pattern = new RegExp(param + '=(.*?)(;|&|$)', 'gi');
            return url[1].split(pattern)[1];
        }

        $("#btninviteusers").css("background-color", "#93bf47");
    </script>
}