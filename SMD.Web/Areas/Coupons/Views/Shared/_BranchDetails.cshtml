<div class="modal fade my-modal" id="branchCategoryDialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" >

            <div class="modal-content partial-contents" style="background-color:#FFFFFF;border-radius:5px;width:1160px;margin-left:-285px;margin-top:-1px;" id="branchCategoryDialog">
                <div class="modal-header" id="child-dialog-title">
                    <span class="modal-title Theme_standard_clr" style="font-size:24px;">Branch Locations</span>
                    <button type="button" class="close" data-dismiss="modal" data-bind="click:$root.hideBranchCategoryDialog" aria-label="Close"><span aria-hidden="true">×</span></button>
                </div>
                <div class="col-lg-12" style="padding-top: 20px">
                    <div class="col-lg-12 clearfix">
                        <span style="border-bottom:none!important;">Branch locations are used for coupons only.Create coupons with multiple participating branches by assigning saved branch locations. </span><span style="display:none;" class="red bold rightAlign"> Watch Video <img src="/Images/youtube_play.JPG" height="20px" /> </span>
                    </div>
                    <div class="col-lg-12">
                        <div class="text-left col-lg-6" style="padding-left:0;">
                            <span style="border-bottom:none!important;">Organize your branches by geography or store type.</span>
                        </div>
                        <div class="col-lg-6" style="padding-right:0;">
                            <div style="margin-top:20px">
                                <div class="filter-block pull-right">
                                    <button data-bind="click:$root.AddNewCategory" class="btn btn-primary">
                                        New Category
                                    </button>
                                    <button data-bind="click:$root.CreateNewBranchLocation" class="btn btn-primary">
                                        New Branch Location
                                    </button>
                                </div>
                            </div>

                        </div>
                    </div>
                    @*<div class="col-lg-12">
                        <span style="border-bottom:none!important;">Organize your branches by geography or store type.</span>
                    </div>*@
                    <div class="col-lg-12">
                        <div class="row">
                            <div class="col-lg-3" style="margin-top:10px;">

                                <div class="table-responsive">
                                    <table class="table" id="phrase-section-table">
                                        <thead>
                                            <tr>
                                                <th style="border-bottom-width: 0px;padding-bottom: 3px; padding-left: 0px;">
                                                    <span id="phrase-header-phrase ">SELECT CATEGORY & BRANCH</span>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td style="border:none;padding-top:7px; padding-left: 0;">
                                                    <div class="category" id="nestable2" style="margin-top: 0px; border-top-width: 1px;">
                                                        <ol class="dd-list" id="child-phrase">
                                                            <!-- ko template: { name: 'sectionItemTemplate', foreach: $root.branchCategory }-->
                                                            <!-- /ko -->
                                                        </ol>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>

                            <div class="col-lg-4 form-horizontal" data-bind="with: $root.selectedBranch">
                                <div class=" form-group">
                                    <label for="branchTitle"  class="labelFontBranch">Branch Address Details</label>
                                </div>
                                <div class="form-group ">
                                    <div class="col-lg-5 text-right">
                                        <label for="branchTitle" class="col-form-label labelColour ">Branch Title</label>
                                    </div>
                                    <div class="col-lg-7">
                                        <input class="form-control" data-bind="value:branchTitle" type="text" id="branchTitle">
                                    </div>
                                </div>
                                <div class="form-group ">
                                    <div class="col-lg-5 text-right">
                                        <label for="branaddress1" class="col-form-label labelColour">Address Line 1</label>
                                    </div>
                                    <div class="col-lg-7">
                                        <input class="form-control" data-bind="value:branchAddressline1" type="text" id="branaddress1">
                                    </div>
                                </div>
                                <div class="form-group ">
                                    <div class="col-lg-5 text-right">
                                        <label for="branaddress2" class="col-form-label">Address Line 2</label>
                                    </div>
                                    <div class="col-lg-7">
                                        <input class="form-control" data-bind="value:branchAddressline2" type="text" id="branaddress2">
                                    </div>
                                </div>
                                <div class="form-group ">
                                    <div class="col-lg-5 text-right">
                                        <label for="city" class="col-form-label labelColour">City</label>
                                    </div>
                                    <div class="col-lg-7">
                                        <input class="form-control" data-bind="value:branchCity" type="text" id="city">
                                    </div>
                                </div>
                                <div class="form-group ">
                                    <div class="col-lg-5 text-right">
                                        <label for="state" class="col-form-label labelColour">State</label>
                                    </div>
                                    <div class="col-lg-7">
                                        <input class="form-control" data-bind="value:branchState" type="text" id="state">
                                    </div>
                                </div>
                                <div class="form-group ">
                                    <div class="col-lg-5 text-right">
                                        <label for="zipCode" class="col-form-label labelColour">Zip/Post Code</label>
                                    </div>
                                    <div class="col-lg-7">
                                        <input class="form-control" data-bind="value:branchZipCode" type="text" id="zipCode">
                                    </div>
                                </div>
                                <div class="form-group ">
                                    <div class="col-lg-5 text-right">
                                        <label for="country" class="col-form-label labelColour">Country</label>
                                    </div>
                                    <div class="col-lg-7">
                                        <select class="form-control" id="country" style="width:100%" data-bind="options: $root.countries, optionsText: 'CountryName', optionsValue: 'CountryId', optionsCaption: 'Select Country',value:countryId"></select>
                                    </div>
                                </div>
                                <div class="form-group ">
                                    <div class="col-lg-5 text-right">
                                        <label for="phnNo" class="col-form-label labelColour">Branch Sales Tel #</label>
                                    </div>
                                    <div class="col-lg-7">
                                        <input class="form-control" data-bind="value:branchPhone" type="text" id="phnNo">
                                    </div>
                                </div>
                                <div class="form-group" data-bind="visible:false">
                                    <div class="col-lg-5 text-right">
                                        <label for="geoX" class="col-form-label labelColour">GEO X</label>
                                    </div>
                                    <div class="col-lg-7">
                                        <input class="form-control" readonly="readonly" data-bind="value:branchLocationLat" type="text" style="width:70%" id="geoX">
                                    </div>
                                </div>
                                <div class="form-group" data-bind="visible:false">
                                    <div class=" col-lg-5 text-right">
                                        <label for="geoy" class="col-form-label labelColour">GEO Y</label>
                                    </div>
                                    <div class="col-lg-7">
                                        <input class="form-control" readonly="readonly" data-bind="value:branchLocationLon" type="text" style="width:70%" id="geoy">
                                    </div>
                                </div>
                                <div class="form-group ">
                                    <div class="col-lg-5 text-right">
                                        <label for="pCategory" class="col-form-label labelColour">Select parent Category</label>
                                    </div>
                                    <div class="col-lg-7">
                                        <select class="form-control" data-bind="options:$root.branchDdlist, optionsText: 'name', optionsValue:'categoryId',optionsCaption: 'Choose...', value:branchCategoryId" id="pCategory" style="width:70%"></select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-5" data-bind="visible:$root.isMapVisible() && $root.isAddressFilled" style="margin-top:116px;padding-left:18px;padding-right:8px">
                                <button type="button" data-bind="visible:$root.isAddressFilled,click: $root.CodeAddressonMap" class=" btn btn-primary">Locate on Map</button>
                               
                                @*<a href="#" class="table-link danger" data-bind="visible:$root.isAddressFilled,click: $root.CodeAddressonMap" style="margin-top:50px">
                                    Locate on Map
                                </a>*@
                                <div data-bind="visible:$root.isAddressFilled" style="width:100%;height:239px; margin-top:10px; border:2px solid" id="map-canvas"></div>
                                <span class="pull-right" style="padding-top:5px">Move pointer to  exact geo coordinates </span>

                            </div>

                        </div>

                    </div>

                </div>
                <div class="modal-footer" style="padding-left:0px;padding-right:0px;padding-bottom:15px;">
                    <hr style="margin-bottom:15px;margin-top:0px;" />
                    <div style="padding-right:15px;">
                        <button type="button" data-bind="click: $root.DeleteBranch,visible:$root.isSaveChangesEnable() && $root.isdeleteEnable()" class="btn btn-danger">Delete this Branch</button>
                        <button type="button" data-bind="click: $root.SaveChanges,visible:$root.isSaveChangesEnable(),enable:$root.isAddressFilled" class=" btn btn-primary">Save Changes</button>
                        <button id="btnClose" type="button" data-bind="click:$root.hideBranchCategoryDialog" class="btn btn-default">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@*TEMPLATE FOR SELECT CATEGORY & BRANCH*@
<script id="sectionItemTemplate" type="text/html">
        <li class="dd-item dd-item-list" data-id="15">
            <div class="dd-handle-list" style="cursor: pointer;height:38px"><i class=" fa fa-chevron-circle-right" data-bind="event:{click:$root.selectCategory},css: { selectedRow: $root.selectedCategory() === $data }"></i></div>
            <div class="dd-handle" id="SectionName" style="cursor: pointer;height:40px" data-bind="event: { dblclick :$root.EditCategory },css: { selectedRow: $root.selectedCategory() === $data }">

                <div class="col-sm-12" style="padding:0">
                    <div class="col-sm-9" style="padding:0">
                        <span id=" sectionnamespan" data-bind="text:name,visible:!isEditMode()">
                        </span>
                        <input data-bind="value:name,visible:isEditMode,event:{focusout:$root.SaveCategory}" autofocus class="form-control" style="width:98%;height:28px" type="text">
                    </div>
                    <div class="col-sm-1 pull-right" style="padding:0 ;margin-right:4px">

                        <a href="#" class="table-link danger" data-bind="click:$root.DeleteCategory,visible:isVisibleDelete()" title="Delete">
                            <span class="fa-stack">
                                <i class="fa fa-square fa-stack-2x"></i>
                                <i class="fa fa-trash-o fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </div>
                    <div class="col-sm-1" data-bind="visible:isEditMode()&& isVisibleDelete() " style="padding:0;">
                        <a href="#" class="table-link success" data-bind="click:$root.SaveCategory,visible:isEditMode()" title="Save">
                            <span class="fa-stack">
                                <i class=" fa fa-square fa-stack-2x">
                                </i>
                                <i class="fa fa-save fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </div>
                </div>

            </div>
            <ol class="dd-list" data-bind="visible:isExpanded()">
                <!-- ko template: { name: 'childSectionIemTemplate',foreach:brachFeilds}-->
                <!-- /ko -->
            </ol>

        </li>
    </script>
@*Template for Branch Field*@
<script id="childSectionIemTemplate" type="text/html">
        <li class="dd-item dd-item-list" data-id="16" style=" cursor:pointer;" data-bind="css: { selectedRow: $root.selectedCategory() === $data }">
            <div class="dd-handle-list"><i class="fa fa-minus-square"></i></div>
            <div class="dd-handle txt-blue-hover" data-bind="click: $root.selectbranchField,css: { selectedRow: $root.selectedCategory() === $data }">
                <span data-bind=" text:branchTitle">
                </span>
                <div class="nested-links">
                </div>
            </div>
        </li>
    </script>
@*<script src="https://maps.googleapis.com/maps/api/js?key=http://smdpreview.com/Home/Welcome" type="text/javascript"></script>*@
<script>
</script>




